{% comment %}

    Add a thumbnail image or icon based on format for a child item, with a object_location link (if available).

{% endcomment %}
{% if child.object_location %}<a href="{{ child.object_location | relative_url }}" target="_blank" rel="noopener">{% endif %}
    {% if child.image_thumb or child.image_small %}
    <img class="img-thumbnail" src="{{ child.image_small | default: child.image_thumb | relative_url }}" alt="{{ child.image_alt_text | default: child.description | default: child.title | escape }}"><br>
        <div class="btn-group my-2" role="group" aria-label="Item options">
    
    {% if child.date %}{%- capture year -%}{% if child.date contains "-" %}{{ child.date | split: "-" | first }}{% elsif child.date contains "/" %}{{ child.date | split: "/" | last }}{% else %}{{ child.date }}{% endif %}{%- endcapture -%}
    <a href="{{ year | strip | prepend: '/timeline.html#y' | relative_url }}" class="btn btn-outline-primary">View on Timeline</a>{% endif %}
        {% if child.object_location %}<a target="_blank" rel="noopener" href="{{ child.object_location | relative_url }}" class="btn btn-outline-primary">
        {% if child.display_template == 'video' and child.object_location contains 'vimeo' %}View on Vimeo{% elsif child.display_template == 'video' and child.object_location contains 'youtu' %}View on YouTube{% elsif child.display_template == 'record'%}Link to Object{% elsif child.display_template == 'book'%}Link to Catalog Record{% else %}View {{ child.format | split: '/' | last | default: page.display_template | upcase }}{% endif %}
    </a>{% endif %}
</div>
    {% else %}
    <svg class="bi text-body" fill="currentColor" aria-hidden="true">
        {%- assign icon_template = child.display_template | default: child.format -%}
        <use xlink:href="{{ '/assets/lib/cb-icons.svg' | relative_url }}#{% if icon_template contains 'image' %}icon-image{% elsif icon_template contains 'pdf' %}icon-pdf{% elsif icon_template contains 'audio' %}icon-audio{% elsif icon_template contains 'video' %}icon-video{% elsif icon_template contains 'record' %}icon-record{% else %}icon-default{% endif %}"/>
    </svg>
    <span class="visually-hidden">{{ child.title | escape }} - {{ child.format }}</span>
    {% endif %}
{% if child.object_location %}</a>{% endif %}


